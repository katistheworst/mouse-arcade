<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üåÄ Particle Gravity Toy</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0a0a12;overflow:hidden;font-family:'Segoe UI',sans-serif;cursor:none}
canvas{display:block}
#ui{position:fixed;top:16px;left:16px;z-index:10;color:#c4b5fd;font-size:13px}
#ui h1{font-size:18px;margin-bottom:6px;color:#e9d5ff}
#ui p{opacity:.7;margin-bottom:10px;font-size:12px}
.btn-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px}
.btn{background:rgba(139,92,246,.25);border:1px solid rgba(139,92,246,.4);color:#e9d5ff;padding:5px 12px;border-radius:16px;font-size:12px;cursor:pointer;transition:.2s}
.btn:hover,.btn.active{background:rgba(139,92,246,.5);border-color:#a78bfa}
#count{position:fixed;bottom:16px;right:16px;color:rgba(196,181,253,.4);font-size:12px;z-index:10}
#cursor{position:fixed;pointer-events:none;z-index:20;width:24px;height:24px;border-radius:50%;border:2px solid rgba(139,92,246,.6);transform:translate(-50%,-50%);transition:width .2s,height .2s,border-color .2s}
#cursor.attract{width:36px;height:36px;border-color:rgba(168,85,247,.9);box-shadow:0 0 20px rgba(168,85,247,.4)}
#cursor.repel{width:36px;height:36px;border-color:rgba(244,114,182,.9);box-shadow:0 0 20px rgba(244,114,182,.4)}
</style>
</head>
<body>
<div id="cursor"></div>
<div id="ui">
<h1>üåÄ Particle Gravity</h1>
<p>Move mouse = gravity well ¬∑ Click = attract ¬∑ Right-click = repel</p>
<div class="btn-row">
<button class="btn active" onclick="setMode('gravity')">üåë Gravity</button>
<button class="btn" onclick="setMode('vortex')">üåÄ Vortex</button>
<button class="btn" onclick="setMode('fountain')">‚õ≤ Fountain</button>
</div>
<div class="btn-row">
<button class="btn" onclick="burst()">üí• Burst</button>
<button class="btn" onclick="clearAll()">üóëÔ∏è Clear</button>
<button class="btn" onclick="toggleTrails()">‚ú® Trails</button>
</div>
<div class="btn-row" id="palettes"></div>
</div>
<div id="count"></div>
<canvas id="c"></canvas>
<script>
const C=document.getElementById('c'),X=C.getContext('2d'),cur=document.getElementById('cursor');
let W,H;function resize(){W=C.width=innerWidth;H=C.height=innerHeight}
resize();addEventListener('resize',resize);

const palettes={
 cosmic:['#a78bfa','#c084fc','#e879f9','#f0abfc','#818cf8','#6366f1'],
 fire:['#f97316','#fb923c','#fbbf24','#ef4444','#f43f5e','#fde68a'],
 ocean:['#06b6d4','#22d3ee','#67e8f9','#3b82f6','#60a5fa','#a5f3fc'],
 neon:['#00ff88','#ff006e','#00bbff','#ffdd00','#ff00ff','#88ff00'],
 pastel:['#fca5a5','#fdba74','#fde047','#86efac','#7dd3fc','#c4b5fd']
};
let palName='cosmic',pal=palettes.cosmic;
const palDiv=document.getElementById('palettes');
Object.keys(palettes).forEach(k=>{
 const b=document.createElement('button');
 b.className='btn'+(k==='cosmic'?' active':'');
 b.textContent=k[0].toUpperCase()+k.slice(1);
 b.onclick=()=>{palName=k;pal=palettes[k];palDiv.querySelectorAll('.btn').forEach(x=>x.classList.remove('active'));b.classList.add('active')};
 palDiv.appendChild(b);
});

let mode='gravity',trails=true,mx=W/2,my=H/2,md=false,repel=false;
const particles=[];const MAX=1500;

class P{
 constructor(x,y,vx,vy){
  this.x=x;this.y=y;this.vx=vx||0;this.vy=vy||0;
  this.life=1;this.decay=.001+Math.random()*.002;
  this.col=pal[Math.random()*pal.length|0];
  this.r=1.5+Math.random()*2;
  this.trail=[];
 }
 update(){
  const dx=mx-this.x,dy=my-this.y,dist=Math.sqrt(dx*dx+dy*dy)+1;
  const strength=md?(repel?-800:800):150;
  const force=strength/(dist*dist)*Math.min(dist,200);
  let fx=dx/dist*force,fy=dy/dist*force;
  if(mode==='vortex'){
   const tmp=fx;fx=fx-dy/dist*force*.5;fy=fy+tmp*.5;
  }
  this.vx+=fx;this.vy+=fy;
  this.vx*=.985;this.vy*=.985;
  this.x+=this.vx;this.y+=this.vy;
  this.life-=this.decay;
  if(trails&&this.trail.length<12)this.trail.push({x:this.x,y:this.y});
  else if(trails){this.trail.shift();this.trail.push({x:this.x,y:this.y})}
 }
 draw(){
  if(trails&&this.trail.length>1){
   X.beginPath();X.moveTo(this.trail[0].x,this.trail[0].y);
   for(let i=1;i<this.trail.length;i++)X.lineTo(this.trail[i].x,this.trail[i].y);
   X.strokeStyle=this.col+'30';X.lineWidth=this.r*.7;X.stroke();
  }
  X.beginPath();X.arc(this.x,this.y,this.r*this.life,0,Math.PI*2);
  X.fillStyle=this.col;X.globalAlpha=this.life;X.fill();X.globalAlpha=1;
 }
}

function spawn(x,y,n=3){
 for(let i=0;i<n&&particles.length<MAX;i++){
  const a=Math.random()*Math.PI*2,s=Math.random()*2;
  particles.push(new P(x||Math.random()*W,y||Math.random()*H,
   mode==='fountain'?Math.cos(a)*s:Math.random()*2-1,
   mode==='fountain'?-2-Math.random()*3:Math.random()*2-1));
 }
}

function burst(){for(let i=0;i<80;i++){const a=Math.random()*Math.PI*2,s=2+Math.random()*4;particles.push(new P(mx,my,Math.cos(a)*s,Math.sin(a)*s))}}
function clearAll(){particles.length=0}
function toggleTrails(){trails=!trails;if(!trails)particles.forEach(p=>p.trail=[])}
function setMode(m){mode=m;document.querySelectorAll('#ui .btn-row:first-of-type .btn').forEach(b=>b.classList.remove('active'));document.querySelectorAll('#ui .btn-row:first-of-type .btn').forEach(b=>{if(b.textContent.toLowerCase().includes(m))b.classList.add('active')})}

addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;cur.style.left=mx+'px';cur.style.top=my+'px'});
addEventListener('mousedown',e=>{e.preventDefault();md=true;repel=e.button===2;cur.classList.add(repel?'repel':'attract')});
addEventListener('mouseup',()=>{md=false;repel=false;cur.classList.remove('attract','repel')});
addEventListener('contextmenu',e=>e.preventDefault());
addEventListener('touchmove',e=>{const t=e.touches[0];mx=t.clientX;my=t.clientY;cur.style.left=mx+'px';cur.style.top=my+'px';e.preventDefault()},{passive:false});
addEventListener('touchstart',e=>{md=true;cur.classList.add('attract');const t=e.touches[0];mx=t.clientX;my=t.clientY});
addEventListener('touchend',()=>{md=false;cur.classList.remove('attract')});

let frame=0;
function loop(){
 requestAnimationFrame(loop);
 X.fillStyle='rgba(10,10,18,'+(trails?.08:.3)+')';
 X.fillRect(0,0,W,H);
 if(frame%2===0)spawn(Math.random()*W,Math.random()*H,2);
 if(mode==='fountain'&&frame%3===0)spawn(W/2,H*.8,2);
 for(let i=particles.length-1;i>=0;i--){
  particles[i].update();particles[i].draw();
  if(particles[i].life<=0||particles[i].x<-50||particles[i].x>W+50||particles[i].y<-50||particles[i].y>H+50)particles.splice(i,1);
 }
 document.getElementById('count').textContent=particles.length+' particles';
 frame++;
}
// seed initial
for(let i=0;i<200;i++)spawn();
loop();
</script>
</body>
</html>
