<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aurora Borealis ‚Äî Northern Lights Generator</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0a0a1a;overflow:hidden;font-family:'Segoe UI',system-ui,sans-serif;cursor:crosshair;user-select:none}
canvas{display:block}
#ui{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);display:flex;gap:10px;opacity:0;transition:opacity .4s;z-index:10}
body:hover #ui,body:active #ui{opacity:1}
button,select{background:rgba(80,40,120,.6);color:#d4c0f0;border:1px solid rgba(180,160,255,.3);border-radius:20px;padding:8px 18px;font-size:13px;cursor:pointer;backdrop-filter:blur(8px);transition:all .2s}
button:hover,select:hover{background:rgba(120,60,180,.7);border-color:rgba(180,160,255,.6)}
select{-webkit-appearance:none;appearance:none;padding-right:24px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%23d4c0f0'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center}
#label{position:fixed;top:20px;left:50%;transform:translateX(-50%);color:rgba(180,160,255,.5);font-size:13px;letter-spacing:2px;text-transform:uppercase;pointer-events:none;opacity:0;transition:opacity .4s}
body:hover #label{opacity:1}
.slider-wrap{display:flex;align-items:center;gap:6px;background:rgba(80,40,120,.6);border:1px solid rgba(180,160,255,.3);border-radius:20px;padding:4px 14px;backdrop-filter:blur(8px)}
.slider-wrap label{color:#d4c0f0;font-size:12px;white-space:nowrap}
input[type=range]{width:80px;accent-color:#b480ff}
</style>
</head>
<body>
<div id="label">Aurora Borealis</div>
<canvas id="c"></canvas>
<div id="ui">
  <select id="palette">
    <option value="classic">üåå Classic Green</option>
    <option value="solar" selected>‚òÄÔ∏è Solar Storm</option>
    <option value="arctic">‚ùÑÔ∏è Arctic Blue</option>
    <option value="rare">üîÆ Rare Red</option>
    <option value="pastel">üå∏ Pastel Dream</option>
  </select>
  <div class="slider-wrap">
    <label>Activity</label>
    <input type="range" id="activity" min="1" max="10" value="6">
  </div>
  <div class="slider-wrap">
    <label>Wind</label>
    <input type="range" id="wind" min="0" max="10" value="4">
  </div>
  <button id="burst">‚ö° Solar Flare</button>
</div>
<script>
const C=document.getElementById('c'),X=C.getContext('2d');
let W,H;
function resize(){W=C.width=innerWidth;H=C.height=innerHeight}
resize();addEventListener('resize',resize);

const palettes={
  classic:[[30,200,100],[50,255,130],[80,255,180],[40,180,120]],
  solar:[[50,255,130],[180,80,255],[255,100,200],[80,200,255]],
  arctic:[[60,140,255],[100,200,255],[140,220,255],[80,180,240]],
  rare:[[220,50,80],[255,80,120],[200,40,100],[255,120,160]],
  pastel:[[200,160,255],[160,220,255],[255,180,220],[180,255,200]]
};

// Stars
const stars=[];
for(let i=0;i<400;i++){
  stars.push({x:Math.random(),y:Math.random()*0.7,s:Math.random()*1.8+0.3,b:Math.random(),sp:Math.random()*0.01+0.003});
}

// Aurora bands
const BANDS=7;
class Band{
  constructor(i){
    this.i=i;
    this.yBase=0.08+i*0.06;
    this.amp=0.02+Math.random()*0.03;
    this.freq=0.8+Math.random()*0.6;
    this.phase=Math.random()*Math.PI*2;
    this.speed=0.2+Math.random()*0.3;
    this.thickness=30+Math.random()*50;
    this.alpha=0.15+Math.random()*0.15;
    this.colorIdx=i%4;
    this.drift=Math.random()*0.001;
    this.shimmerPhase=Math.random()*100;
  }
}
const bands=[];
for(let i=0;i<BANDS;i++)bands.push(new Band(i));

let burstT=0;
document.getElementById('burst').onclick=()=>{burstT=3;};

// Mouse magnetic field interaction
let mx=-1,my=-1;
addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY});
addEventListener('mouseleave',()=>{mx=-1});
addEventListener('click',e=>{
  // Small burst at click
  burstT=Math.max(burstT,1.5);
});

// Mountains silhouette
function drawMountains(){
  X.fillStyle='#080815';
  X.beginPath();
  X.moveTo(0,H);
  const segs=20;
  for(let i=0;i<=segs;i++){
    const t=i/segs;
    const baseH=H*0.82;
    const peak=Math.sin(t*3.1+0.5)*H*0.06+Math.sin(t*7.3)*H*0.025+Math.sin(t*13)*H*0.01;
    X.lineTo(t*W,baseH-Math.abs(peak));
  }
  X.lineTo(W,H);
  X.fill();
  
  // Tree line
  X.fillStyle='#060612';
  X.beginPath();
  X.moveTo(0,H);
  for(let i=0;i<=60;i++){
    const t=i/60;
    const baseH=H*0.87;
    const tree=Math.sin(t*20+2)*H*0.008+Math.sin(t*47)*H*0.005;
    X.lineTo(t*W,baseH-Math.abs(tree));
  }
  X.lineTo(W,H);
  X.fill();
}

// Reflection on water/snow
function drawReflection(t){
  const pal=palettes[document.getElementById('palette').value]||palettes.solar;
  const act=+document.getElementById('activity').value/10;
  const grad=X.createLinearGradient(0,H*0.88,0,H);
  const c=pal[0];
  grad.addColorStop(0,`rgba(${c[0]},${c[1]},${c[2]},${0.05*act})`);
  grad.addColorStop(0.5,`rgba(${c[0]},${c[1]},${c[2]},${0.02*act})`);
  grad.addColorStop(1,'transparent');
  X.fillStyle=grad;
  X.fillRect(0,H*0.88,W,H*0.12);
}

let time=0;
function frame(ts){
  const dt=1/60;
  time+=dt;
  
  const pal=palettes[document.getElementById('palette').value]||palettes.solar;
  const act=+document.getElementById('activity').value/10;
  const windVal=+document.getElementById('wind').value/10;
  
  if(burstT>0)burstT-=dt;
  const burstMul=burstT>0?1+burstT*2:1;
  
  // Sky gradient
  const skyGrad=X.createLinearGradient(0,0,0,H);
  skyGrad.addColorStop(0,'#050518');
  skyGrad.addColorStop(0.4,'#0a0a2a');
  skyGrad.addColorStop(0.8,'#0c0c20');
  skyGrad.addColorStop(1,'#080815');
  X.fillStyle=skyGrad;
  X.fillRect(0,0,W,H);
  
  // Stars
  for(const s of stars){
    s.b+=s.sp;
    const twinkle=0.4+0.6*Math.abs(Math.sin(s.b));
    X.globalAlpha=twinkle*0.8;
    X.fillStyle='#fff';
    X.beginPath();
    X.arc(s.x*W,s.y*H,s.s,0,Math.PI*2);
    X.fill();
  }
  X.globalAlpha=1;
  
  // Aurora bands
  X.globalCompositeOperation='screen';
  
  for(const b of bands){
    b.phase+=b.speed*dt+windVal*0.1*dt;
    b.shimmerPhase+=dt*2;
    
    const col=pal[b.colorIdx%pal.length];
    const segments=120;
    
    for(let pass=0;pass<3;pass++){
      const spread=b.thickness*(1+pass*0.8)*burstMul;
      const a=b.alpha*(1-pass*0.25)*act*burstMul;
      
      X.beginPath();
      for(let i=0;i<=segments;i++){
        const t=i/segments;
        const x=t*W;
        
        // Multi-frequency curtain wave
        let y=b.yBase*H;
        y+=Math.sin(t*b.freq*Math.PI*2+b.phase)*b.amp*H*burstMul;
        y+=Math.sin(t*b.freq*3.7+b.phase*1.3+b.i)*b.amp*H*0.3;
        y+=Math.sin(t*11+b.phase*0.7)*H*0.005;
        
        // Wind drift
        const windOffset=Math.sin(time*0.3+b.i*0.5)*windVal*30;
        
        // Mouse magnetic field
        if(mx>0){
          const dx=x-mx,dy=y-my;
          const dist=Math.sqrt(dx*dx+dy*dy);
          if(dist<300){
            const force=(1-dist/300)*40;
            y+=dy/dist*force*-0.5;
          }
        }
        
        if(i===0)X.moveTo(x+windOffset,y);
        else X.lineTo(x+windOffset,y);
      }
      
      // Curtain drops ‚Äî vertical gradient below the line
      for(let i=segments;i>=0;i--){
        const t=i/segments;
        const x=t*W;
        let y=b.yBase*H;
        y+=Math.sin(t*b.freq*Math.PI*2+b.phase)*b.amp*H*burstMul;
        y+=Math.sin(t*b.freq*3.7+b.phase*1.3+b.i)*b.amp*H*0.3;
        y+=Math.sin(t*11+b.phase*0.7)*H*0.005;
        const windOffset=Math.sin(time*0.3+b.i*0.5)*windVal*30;
        
        // Curtain length varies
        const curtainLen=spread*(0.6+0.4*Math.sin(t*8+b.shimmerPhase));
        
        if(mx>0){
          const dx=x-mx,dy=y-my;
          const dist=Math.sqrt(dx*dx+dy*dy);
          if(dist<300){
            const force=(1-dist/300)*40;
            y+=dy/dist*force*-0.5;
          }
        }
        
        X.lineTo(x+windOffset,y+curtainLen);
      }
      X.closePath();
      
      // Shimmer alpha variation
      const shimmer=0.7+0.3*Math.sin(b.shimmerPhase+pass);
      
      const grad=X.createLinearGradient(0,b.yBase*H-50,0,b.yBase*H+spread*1.5);
      grad.addColorStop(0,`rgba(${col[0]},${col[1]},${col[2]},${a*shimmer*0.8})`);
      grad.addColorStop(0.3,`rgba(${col[0]},${col[1]},${col[2]},${a*shimmer})`);
      grad.addColorStop(0.7,`rgba(${col[0]},${col[1]},${col[2]},${a*shimmer*0.4})`);
      grad.addColorStop(1,`rgba(${col[0]},${col[1]},${col[2]},0)`);
      
      X.fillStyle=grad;
      X.fill();
    }
  }
  
  // Bright corona at the top of active bands
  for(const b of bands){
    const col=pal[b.colorIdx%pal.length];
    const coronaA=0.1*act*burstMul;
    for(let i=0;i<40;i++){
      const t=i/40;
      const x=t*W;
      let y=b.yBase*H;
      y+=Math.sin(t*b.freq*Math.PI*2+b.phase)*b.amp*H*burstMul;
      const windOffset=Math.sin(time*0.3+b.i*0.5)*(+document.getElementById('wind').value/10)*30;
      
      X.fillStyle=`rgba(${Math.min(255,col[0]+80)},${Math.min(255,col[1]+80)},${Math.min(255,col[2]+80)},${coronaA*(0.5+0.5*Math.sin(time*3+t*20+b.i))})`;
      X.beginPath();
      X.arc(x+windOffset,y,2+Math.random()*2,0,Math.PI*2);
      X.fill();
    }
  }
  
  X.globalCompositeOperation='source-over';
  
  // Mountains
  drawMountains();
  
  // Reflection
  drawReflection(time);
  
  requestAnimationFrame(frame);
}
requestAnimationFrame(frame);
</script>
</body>
</html>
